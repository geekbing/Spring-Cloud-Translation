
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>环境更改 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Refresh Scope.html" />
    
    
    <link rel="prev" href="Customizing the Bootstrap Property Sources.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    本书说明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../Introduction/spring-cloud-introduce.html">
            
                <a href="../../Introduction/spring-cloud-introduce.html">
            
                    
                    Spring Cloud 简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../Introduction/Features.html">
            
                <a href="../../Introduction/Features.html">
            
                    
                    Spring Cloud 特色
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../Cloud Native Applications.html">
            
                <a href="../Cloud Native Applications.html">
            
                    
                    原生云应用
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="Spring Cloud Context.html">
            
                <a href="Spring Cloud Context.html">
            
                    
                    Spring Cloud 上下文
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="The Bootstrap Application Context.html">
            
                <a href="The Bootstrap Application Context.html">
            
                    
                    应用程序引导上下文
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="Application Context Hierarchies.html">
            
                <a href="Application Context Hierarchies.html">
            
                    
                    应用上下文层次结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="Changing the Location of Bootstrap Properties.html">
            
                <a href="Changing the Location of Bootstrap Properties.html">
            
                    
                    更改引导属性的位置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.4" data-path="Overriding the Values of Remote Properties.html">
            
                <a href="Overriding the Values of Remote Properties.html">
            
                    
                    覆盖远程属性的值
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.5" data-path="Customizing the Bootstrap Configuration.html">
            
                <a href="Customizing the Bootstrap Configuration.html">
            
                    
                    自定义引导配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.6" data-path="Customizing the Bootstrap Property Sources.html">
            
                <a href="Customizing the Bootstrap Property Sources.html">
            
                    
                    自定义引导属性源
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.1.7" data-path="Environment Changes.html">
            
                <a href="Environment Changes.html">
            
                    
                    环境更改
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.8" data-path="Refresh Scope.html">
            
                <a href="Refresh Scope.html">
            
                    
                    刷新作用域
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.9" data-path="Encryption and Decryption.html">
            
                <a href="Encryption and Decryption.html">
            
                    
                    加密和解密
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.10" data-path="Endpoints.html">
            
                <a href="Endpoints.html">
            
                    
                    端点
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../Spring Cloud Commons/Spring Cloud Commons- Common Abstractions.html">
            
                <a href="../Spring Cloud Commons/Spring Cloud Commons- Common Abstractions.html">
            
                    
                    Spring Cloud Commons: 公共抽象
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../Spring Cloud Commons/Spring RestTemplate as a Load Balancer Client.html">
            
                <a href="../Spring Cloud Commons/Spring RestTemplate as a Load Balancer Client.html">
            
                    
                    Spring RestTemplate作为负载均衡客户端
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../Spring Cloud Commons/Multiple RestTemplate objects.html">
            
                <a href="../Spring Cloud Commons/Multiple RestTemplate objects.html">
            
                    
                    多个RestTemplate对象
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="../Spring Cloud Commons/Ignore Network Interfaces.html">
            
                <a href="../Spring Cloud Commons/Ignore Network Interfaces.html">
            
                    
                    忽略网络接口
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >环境更改</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="&#x73AF;&#x5883;&#x66F4;&#x6539;">&#x73AF;&#x5883;&#x66F4;&#x6539;</h1>
<h1 id="todo">TODO</h1>
<hr>
<h1 id="environment-changes">Environment Changes</h1>
<p>The application will listen for an EnvironmentChangedEvent and react to the change in a couple of standard ways (additional ApplicationListeners can be added as @Beans by the user in the normal way). When an EnvironmentChangedEvent is observed it will have a list of key values that have changed, and the application will use those to:</p>
<p>Re-bind any @ConfigurationProperties beans in the context</p>
<p>Set the logger levels for any properties in logging.level.*</p>
<p>Note that the Config Client does not by default poll for changes in the Environment, and generally we would not recommend that approach for detecting changes (although you could set it up with a @Scheduled annotation). If you have a scaled-out client application then it is better to broadcast the EnvironmentChangedEvent to all the instances instead of having them polling for changes (e.g. using the Spring Cloud Bus).</p>
<p>The EnvironmentChangedEvent covers a large class of refresh use cases, as long as you can actually make a change to the Environment and publish the event (those APIs are public and part of core Spring). You can verify the changes are bound to @ConfigurationProperties beans by visiting the /configprops endpoint (normal Spring Boot Actuator feature). For instance a DataSource can have its maxPoolSize changed at runtime (the default DataSource created by Spring Boot is an @ConfigurationProperties bean) and grow capacity dynamically. Re-binding @ConfigurationProperties does not cover another large class of use cases, where you need more control over the refresh, and where you need a change to be atomic over the whole ApplicationContext. To address those concerns we have @RefreshScope.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Customizing the Bootstrap Property Sources.html" class="navigation navigation-prev " aria-label="Previous page: 自定义引导属性源">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Refresh Scope.html" class="navigation navigation-next " aria-label="Next page: 刷新作用域">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"环境更改","level":"1.4.1.7","depth":3,"next":{"title":"刷新作用域","level":"1.4.1.8","depth":3,"path":"Cloud Native Applications/Spring Cloud Context/Refresh Scope.md","ref":"Cloud Native Applications/Spring Cloud Context/Refresh Scope.md","articles":[]},"previous":{"title":"自定义引导属性源","level":"1.4.1.6","depth":3,"path":"Cloud Native Applications/Spring Cloud Context/Customizing the Bootstrap Property Sources.md","ref":"Cloud Native Applications/Spring Cloud Context/Customizing the Bootstrap Property Sources.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Cloud Native Applications/Spring Cloud Context/Environment Changes.md","mtime":"2017-02-21T03:25:14.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-02-21T03:42:14.461Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

